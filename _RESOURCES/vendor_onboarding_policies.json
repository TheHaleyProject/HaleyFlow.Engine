{
  "policy_name": "vendoronboarding.policy",
  "for": { "definition": "vendoronboarding", "version": 1 },
  "policies": [
    { "code": "POL.ONBOARD.PWD.INITIAL.V1", "params": { 
        "kind": "password_setup", 
        "mode": "initial", 
        "template": "EMAIL.VENDOR.PASSWORD.CREATE", 
        "link": { "fresh": true, "ttl": "P2D" }} 
    },
    { "code": "POL.ONBOARD.PWD.REMIND.V1", "params": { 
        "kind": "password_setup", 
        "mode": "reminder", 
        "template": "EMAIL.VENDOR.PASSWORD.REMIND", 
        "link": { "fresh": true, "ttl": "P2D" }, 
        "reminder": { "every": "P2D" }} 
    },
    { "code": "POL.ONBOARD.PWD.DONE.V1", "params": { 
        "kind": "password_setup", 
        "mode": "completed", 
        "template": "EMAIL.VENDOR.PASSWORD.CREATED" } 
    }
  ],
  "routes": [
    { "state": "AwaitPasswordCreation", "on": "enter", "via": 1000, "policy": "POL.ONBOARD.PWD.INITIAL.V1", "emit": [ { "event": "APP.ONBOARD.PASSWORD.LINK.SEND", "complete": { "success": 0, "failure": 0, "timeout": 0, "canceled": 0 } } ] },
    { "state": "AwaitPasswordCreation", "on": "enter", "via": 1002, "policy": "POL.ONBOARD.PWD.REMIND.V1", "emit": [ { "event": "APP.ONBOARD.PASSWORD.LINK.REMIND", "complete": { "success": 0, "failure": 0, "timeout": 0, "canceled": 0 } } ] },
    { "state": "PasswordCreated", "on": "enter", "policy": "POL.ONBOARD.PWD.DONE.V1", "emit": [ { "event": "APP.ONBOARD.PASSWORD.CREATED.ACK", "complete": { "success": 0, "failure": 0, "timeout": 0, "canceled": 0 } } ] }
  ]
}
